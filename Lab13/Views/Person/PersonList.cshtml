@model List<Lab13.Models.Person>
@{
    ViewBag.Title = "Listar";
    var grid = new WebGrid(source: Model, columnNames: new[] {
        "PersonID", "FirstName", "LastName", "DateOfBirth", "Address", "Email"
    });
}

<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h2 class="h4 mb-0">Listado de Personas</h2>
        <div class="input-group input-group-merge search-bar w-auto">
            <span class="input-group-text" id="topbar-addon"><span class="fas fa-search"></span></span>
            <input type="text" class="form-control" id="search" placeholder="Buscar" aria-label="Search" aria-describedby="topbar-addon" autocomplete="off" />
        </div>
    </div>
    <div class="card-body" id="grdPersons"></div>
</div>

<script type="text/javascript">
    $(() => {
        getPersons();
        $("#search").on('keyup', () => {
            getPersons();
        });
    });

    function getPersons() {
        $.ajax({
            url: '/Person/SearchPersons',
            datatype: 'html',
            method: 'GET',
            data: { search: $("#search").val() },
            success: function (response) {
                $('#grdPersons').html('').html(response);
            },
            error: function (error) {
                console.log(error);
            }
        })
    }
</script>
